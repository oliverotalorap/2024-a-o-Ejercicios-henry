(this.$WP=this.$WP||[]).push(["cbvtm4",(e,r)=>{var t,a,o,i,l,n,s,c,p,d,u,g,v,h,_,y,f,T,k,C,m,P,w,I,b,N,x,E,A,G,O,S,q=({onClose:e})=>{var{localize:r}=l();return t(i,{className:"wxIqd",children:t("div",{className:"zGGiT",children:t(n,{hidden:!0,isModalOnly:!0,onClose:e,highlightFirstResult:!0,searchMode:"GeoPicker",size:"large",inputTypography:"input-03",scope:{geoId:1,linkType:"ATTRACTIONS"},source:"ExpCartIconPopover_ExploreNow_Geopicker",placeholderText:r.string("mobile_discovery_where_to"),scrimVariant:"light"})})})},M=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"AutoOpenedCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),z=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"UserClosedCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),D=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"ExploreNowClickCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),U={__key:0x9dad92733350,id:"9dad92733350792d6fda9af4d08cde62",loc:{},definitions:[]},B=(e,r,t)=>{var[{data:a,fetching:o}]=g({query:U,variables:{page:e||"",geoId:t},pause:r});return{url:a?.routes?.[0]?.url||null,fetching:o}},K=({hidePopover:e=()=>{},setGeoPickerOpened:r,variant:a="borderless"})=>{var{localize:o}=l(),i=u(),{page:n,params:g}=p(),v=d(),h="geoId"in g&&g.geoId||null,_=null==h||h<=1,{url:y}=E("Attractions",_,h),f=t=>{i({AppPresentation:D(v,n)}),e(),t.stopPropagation(),_&&(r(!0),t.preventDefault())},T=o("TTD_Explore_Now");return"primary"===a?t(s,{variant:"primary",onClick:f,size:"small",children:T}):t(c,{role:_?"button":void 0,href:y||"/Attractions",onClick:f,children:T})},R=({isCartEmpty:e,hidePopover:r,setGeoPickerOpened:o})=>{var{localize:i}=l(),n=t(b,{variant:"title-04",marginBottom:"spacing-02",children:i(e?"TTD_Add_Things_To_Cart":"TTD_Book_More_Things")}),s=t(b,{variant:"body-01",children:i(e?"TTD_Empty_Cart_Popover_Message":"TTD_Product_Cart_Popover_Message")});return a("div",{className:I({margin:"spacing-04"}),"data-automation":"cartPopover",children:[n,s,t(A,{hidePopover:r,setGeoPickerOpened:o})]})},j="expCartPopoverInfo",L=e=>{var r=N.get(j);return!r||r.lastUserId!==e},W=e=>{N.set(j,{lastUserId:e},O)},F={overlay:"gUpLp f H e _V Ra Gi"},J=({triggerRef:e,isCartEmpty:r})=>{var{page:i}=p(),l="MOBILE"===k(),n=u(),s=d(),c=C(),g=v(null),[I,b]=h(!1),[N,E]=h(!1),A=_(()=>{N&&(n({AppPresentation:z(s,i)}),E(!1))},[N,n,s,i,E]);w("Escape",A);var O=f({experimentKeys:["ta_vi_pdp_click_off_test_1672849503"],skipImpression:!0}),S=O?.ta_vi_pdp_click_off_test_1672849503,q=null===O||S&&"control"!==S;return(y(()=>{!l&&L(c)&&!q&&(n({AppPresentation:M(s,i)}),W(c),E(!0))},[q,l,n,i,s,E,c]),T("click",e=>{"click"===e.type&&e.target instanceof Node&&!g.current?.contains(e.target)&&A()},void 0),e.current)?a(o,{children:[N&&t(P,{children:t(m,{unstyled:!0,autoFocus:!0,position:"below",alignEdge:"right",arrowType:"small",showArrowWhenUnstyled:!0,target:e.current,children:t("div",{ref:g,className:F.overlay,children:t(G,{isCartEmpty:r,hidePopover:A,setGeoPickerOpened:b})})})}),I&&t(x,{onClose:()=>b(!1)})]}):null};return[()=>{x=q,E=B,A=K,G=R,O=432e6,S=J,e({ExploreNowCta:A,GeoPickerModal:x,default:S})},[e=>(t=e.jsx,a=e.jsxs,o=e.Fragment),e=>i=e.OverlayPortal,e=>l=e.useLocalize,e=>n=e.default,e=>(s=e.default,c=e.BorderlessButton),e=>p=e.useRoute,e=>d=e.useSessionId,e=>u=e.useInteractionLogger,e=>g=e.useQuery,e=>(v=e.useRef,h=e.useState,_=e.useCallback,y=e.useEffect),e=>f=e.default,e=>T=e.useWindow,e=>k=e.useViewportCategory,e=>C=e.useUserId,e=>m=e.default,e=>P=e.AfterConsent,e=>w=e.useKeyboardEvent,e=>I=e.margin,e=>b=e.default,e=>N=e.default]]},["121h32","14euae","17thqz","11b5l5","jppfwt","fgwvq1","1al4vi","32pwc7","1mqwhq","1o4yt4","gugp1d","ltllz9","1ys6v1","52far5","1x9dv9","1973cc","1gttbj","gw8uw6","1essqv","19b9b1"]]);
