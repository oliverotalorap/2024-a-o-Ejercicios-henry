(this.$WP=this.$WP||[]).push(["1ae77w",(e,t)=>{var r,a,n,l,o,s,i,d,u,c,m,C,p,E,f,L,y,g,A,I,h,b,R,_,S,v,M,w,T,N,P,O,W,V,k,G,x,U,B,D,F,Y,H={controlsWrapper:"rRjcL",controlsContainer:"ythoN w G5",controlsContent:"EKClu w Pp f k",filtersWrapper:"wWokE",filtersContents:"BBFqV"},q=()=>r(w,{layout:"grid"}),K=e=>{var{albumId:t,referenceMediaId:l,categoryId:w,typeId:K,mediaId:Q,locationId:j,locationName:z,secondaryTitleContent:$,actionHandler:J,offer:X,adSlot:Z,businessContact:ee,skipQuickAlbums:et,disableControls:er,getShareUrlForMedia:ea,galleryRendererOverride:en,fullscreenRendererOverride:el,sort:eo,quickAlbumsConfiguration:es,queryClientOverride:ei,heroDataStrategyOverride:ed,pageDataStrategyOverride:eu,trackingCallback:ec,customHeader:em,footerContent:eC}=e,{localize:ep}=V(),eE=R(),ef=ei||"mv",eL=ed||"mvh",ey=eu||("RECENCY"===eo?"mr":"m"),eg=es||"mvqa",eA=y(t),[eI]=c({query:m,variables:{locationId:j,albumId:t===g.PANO_ALBUM?g.ALL_ALBUMS:t,client:ef,dataStrategy:eL,filter:A(K),subAlbumId:t===g.PANO_ALBUM?g.PANO_ALBUM:w,referenceMediaId:l}}),{fetching:eh,data:eb,error:eR}=eI,e_=eb?.mediaAlbum?.status,eS=eh?null:eb?.mediaAlbum?.album;eR&&(console.error("[MASDesktopMediaViewer] albumQuery",eR.message.replace(/Error #[0-9]+/g,"Error #xxx")),eS||J({type:"ERROR",albumId:t,statusCode:-1,errorMessage:eR.message})),e_&&e_>=400&&l&&(console.error(`[MASDesktopMediaViewer] albumQuery received status ${e_}`),J({type:"ERROR",albumId:t,statusCode:e_}));var ev=eS?.mediaList?.[0],eM=eS?.offset||0,[ew,eT]=C({query:p,variables:o(()=>({locationId:j,albumId:t===g.PANO_ALBUM?g.ALL_ALBUMS:t,subAlbumId:t===g.PANO_ALBUM?g.PANO_ALBUM:w,client:ef,dataStrategy:ey,filter:A(K),offset:0,limit:20}),[j,t,w,ef,ey,K])}),eN=Object.keys(ew).length,eP=s(e=>{var t=Math.abs(Math.floor(e/20));return ew?.[t]?ew?.[String(t)]:(eT({offset:20*t,limit:20}),J({type:"PAGED",pageNumber:t}),{fetching:!0,data:null})},[eT,ew,J]),{fetching:eO}=ew[0];i(()=>{eO||eE(_.GALLERY_VIEW_PHOTOS_SEEN,{photosSeen:20*eN})},[eO,eN,eE]);var eW=s(e=>{if(e===eM&&eo!==h.recency)return ev;var t=eP(e);return t?.fetching?null:t?.data?.mediaAlbumPage?.mediaList?.[e%20]},[eP,ev,eM,eo]),eV=s(e=>{var t=eW(e);return t?{media:t,loading:!1}:{loading:!0}},[eW]),ek=d({...b}),[eG,ex]=u(!1),eU=e=>{ex(e)},eB=s((e,t)=>{var a=eW(e);el&&el(a);var n=eS?.totalMediaCount||0;return a?r(v,{media:a,shareUrl:ea?ea(a):null,totalMediaInfo:{selectedIndex:e,totalCount:n},onSwipeRight:()=>{},onSwipeLeft:()=>{},innateTranslations:!1,businessContact:ee,onFullscreenMedia:eU,locationId:j,isActiveViewer:t,trackingCallback:ec}):null},[eW,el,ea,eS,ee,j,ec]),eD="grid",eF=d(!1),[eY]=c({query:E,variables:{locationId:j,client:ef,filter:I(),configuration:eg},pause:!!et}),{data:eH,fetching:eq,error:eK}=eY;eK&&J({type:"ERROR",albumId:t,statusCode:-1,errorMessage:eK.message});var eQ=eH?.mediaWindow?.windowPanes?.[0]?.albums,ej=eQ&&eQ.map(e=>({id:e.albumId,titleNode:r(W,{count:e.totalMediaCount,title:e.name}),thumbnailNode:r(S,{width:"100%",height:"100%",sources:e.mediaList?.[0]?.photoSizes||[]})})),ez=eH?.mediaWindow?.windowPanes?.[0]?.albums,[e$]=c({query:E,variables:{locationId:j,albumId:t,client:ef,filter:I(),configuration:eA},pause:!!er}),{data:eJ,error:eX}=e$;eX&&J({type:"ERROR",albumId:t,statusCode:-1,errorMessage:eX.message});var eZ=s(e=>{J({type:"SOURCE_CHANGE",typeId:e}),eE(_.GALLERY_VIEW_TYPE_CLICK,{typeId:e}),eE(_.SOURCE_FILTER_CLICK,{typeId:e})},[J,eE]),e0=s(e=>{J({type:"CATEGORY_CHANGE",categoryId:e}),eE(_.GALLERY_VIEW_CATEGORY_CLICK,{categoryId:e}),eE(_.ADVANCED_FILTER_CLICK,{categoryId:e})},[J,eE]),[e1,e2]=u(96),e6=e=>{e2(e)},[e5,e7]=u(!1),e4=e=>{e7(e)},e3=s(e=>{J({type:"SORT",sort:e}),eE(_.SORT_TYPE_CHANGE,{sort:e})},[J,eE]),e9=s(()=>{if(eJ&&eJ.mediaWindow?.windowPanes[0]?.albums){var e,{albums:n}=eJ.mediaWindow.windowPanes[0];if(t===g.TRAVELER_ALBUM){var l=ez&&ez.find(e=>e.albumId===g.TRAVELER_ALBUM);e={mediaCounts:{TRAVELER:l?.totalMediaCount||0}}}else e=n.find(e=>e.albumId===w);var o=e?e.mediaCounts:null;if(o)return r("div",{className:H.controlsWrapper,children:r("div",{className:H.controlsContainer,children:r(G,{onHeightChange:e6,filterExpand:e5,children:a("div",{className:H.controlsContent,children:[r("div",{className:H.filtersWrapper,children:a("div",{className:H.filtersContents,children:[r(x,{selectedSourceId:K,sourceCounts:o,onSelect:eZ}),r(U,{albums:eJ?.mediaWindow?.windowPanes?.[0]?.albums,selectedTypeId:K,onSelect:e0,selectedFilterId:w,selectedAlbumId:t,onExpandChange:e4})]})}),r("div",{children:r(B,{selectedSort:null!=eo?eo:h.featured,onSelect:e3})})]})},"MVControlsContainer")})})}return r("div",{className:H.controlsContainer,children:r(G,{header:"",loading:!0,onHeightChange:e6,filterExpand:e5,children:r(D,{height:"100%"})})},"MVControlsContainer")},[eJ,w,K,t,e0,eZ,ez,e5,eo,e3]),e8=d(!l);!e8.current&&ek.current.setSelectedIndex&&eS&&(eS.offset||0===eS.offset)&&(ek.current.setSelectedIndex(eS.offset),e8.current=!0);var te=s(e=>{switch(e.type){case M.albumSelect:J({type:"ALBUM",referenceCompoundMediaId:null,albumId:e.albumId}),eE(_.GALLERY_VIEW_ALBUM_CLICK,{albumId:e.albumId});break;case M.galleryItemClicked:eE(_.DETAIL_VIEW_GALLERY_CLICK,{tileDetails:{offset:e.offset,mode:e.mode},isMWRedesign:!0}),eE(_.GRID_VIEW_ITEM_CLICK),ex(!1),J({type:"GALLERY_CLICK",selectedIndex:e.selectedIndex,offset:e.offset,mode:e.mode,newMedia:eV(e.selectedIndex)});break;case M.fullscreenNav:J({type:"FULLSCREEN_NAV",newMedia:eV(e.newIndex),newIndex:e.newIndex});break;case M.fullscreenClose:eE(_.DETAIL_VIEW_DISMISS,{mvDetailViewCloseType:"controls"===e.closeType?"album_change":e.closeType}),eE(_.VIEW_GALLERY_BUTTON_CLICK),J({type:"FULLSCREEN_CLOSE",closeType:e.closeType});break;case M.scroll:!eF.current&&e.position>0&&(eE(_.GALLERY_VIEW_SCROLL_ENGAGEMENT),eF.current=!0),J({type:"SCROLL",position:e.position});break;case M.close:J({type:"CLOSE"})}},[J,eV,eD,eE]);i(()=>{ek.current.backToTop(),ek.current.closeDetail(),eE(_.GALLERY_VIEW,{isMWRedesign:!0}),eF.current=!1},[t,K,w,eE]),i(()=>{Q||ek.current.closeDetail()},[Q]);var tt=T(ef),tr=N(eg),ta=N(eL),tn=f(eH,eK),tl=L(eb,eR);return a(Y,{errorRenderer:()=>a(n,{children:[r(P,{client:tt,approach:ta,status:O.RenderError}),r(P,{client:tt,approach:tr,status:O.RenderError}),r(P,{enabled:!eh,client:tt,approach:ta,status:tl,decrement:!0}),r(P,{enabled:!eq,client:tt,approach:tr,status:tn,decrement:!0})]}),children:[r(k,{close:()=>J({type:"CLOSE"}),galleryRenderer:(e,t,a)=>{var n=eW(e);return en?en(n,t,a):n?r(F,{media:n,width:t,height:a,locationId:j}):null},fullRenderer:eB,galleryOffsetTop:er?0:e1-2,controlsRenderer:er?null:e9,totalCount:eS?.totalMediaCount||0,quickAlbumsDefinition:ej,selectedAlbumId:t,actionHandler:te,onTileGalleryControls:e=>{ek.current=e},disableFullscreenNavigation:eG,disableFullscreenClose:eG,titleText:z&&ep.string("PhotocC_ffffe1a6",{1:z}),secondaryTitleContent:$,secondaryHeaderContent:X,auxiliaryComponent:Z?Z():null,layoutStyle:eD,detailCloseButton:r(q,{}),useHero:!1,noHistoryManipulation:!0,customHeader:em,footerContent:eC}),r(P,{enabled:!eh,client:tt,approach:ta,status:tl}),r(P,{enabled:!eq,client:tt,approach:tr,status:tn})]})};return[()=>{e("default",l(K))},[e=>(r=e.jsx,a=e.jsxs,n=e.Fragment),e=>(l=e.memo,o=e.useMemo,s=e.useCallback,i=e.useEffect,d=e.useRef,u=e.useState),e=>c=e.useQuery,e=>(m=e.albumQuery,C=e.usePaginatedQuery,p=e.albumPageQuery,E=e.quickAlbumsQuery,f=e.getPrimaryPhotoStatusForWindow,L=e.getPrimaryPhotoStatusForAlbum),e=>(y=e.getRHRFiltersWindowConfig,g=e.AlbumTypes,A=e.getFilter,I=e.getMediaFilterToRetrieveAllPhotos),e=>h=e.mediaSorts,e=>b=e.DEFAULT_CONTROLS,e=>(R=e.useMVTracking,_=e.trackedPageActions),e=>S=e.ResponsiveImage,e=>v=e.MWDetailViewer,e=>M=e.mvActions,e=>w=e.GalleryButton,e=>(T=e.getClient,N=e.getApproach,P=e.PrimaryPhotoStatusCounter,O=e.Status),e=>W=e.StockTitle,e=>V=e.useLocalize,e=>k=e.default,e=>G=e.ControlsContainer,e=>(x=e.SourceFilterDropdown,U=e.AlbumPills,B=e.SortDropdown),e=>D=e.default,e=>F=e.default,e=>Y=e.ErrorBoundary]]},["121h32","1o4yt4","1mqwhq","cboiod","13w1vr","j9pg61","d56uto","1eucgl","76j3t0","80p4m1","ykge6s","de5kvz","tsg6fc","wkhu77","17thqz","1p1duv","1ydm0z","nrft5x","u59av4","15yrpl","183pm0"]]);
